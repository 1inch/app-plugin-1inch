import Eth from '@ledgerhq/hw-app-eth';
import SpeculosTransport from "@ledgerhq/hw-transport-node-speculos";
import TransportNodeHid from "@ledgerhq/hw-transport-node-hid";

const apduPort = 40000;

describe('Hello, Ledger!', () => {
    let eth: Eth;

    beforeEach(async () => {
        // const transport = await SpeculosTransport.open({ apduPort });
        const transport = await  TransportNodeHid.create();
        eth = new Eth(transport);
    });

    it('Should get ETH address', async () => {
        const response = await eth.getAddress("44'/60'/0'/0/0");

        console.log(response);
    })

    it('Should sign unoswap transaction', async () => {
        const response = await eth.signTransaction("44'/60'/0'/0/0", "f8ea0785059682f00083020d099411111112542d85b3ef69ae05771c2dccff4faa2680b8c42e95b6c8000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000038d7ea4c6800000000000000000000000000000000000000000000000000017fc60bf7dfe118b0000000000000000000000000000000000000000000000000000000000000080000000000000000000000000000000000000000000000000000000000000000180000000000000003b6d0340a478c2975ab1ea89e8196811f51a7b7ade33eb11018080");
        console.log(response);
    })

    it('Should sign swap transaction', async () => {
        const response = await eth.signTransaction("44'/60'/0'/0/0", "f90812078501dcd6500083044eed9411111112542d85b3ef69ae05771c2dccff4faa2687038d7ea4c68000b907e47c025200000000000000000000000000fd3dfb524b2da40c8a6d703c62be36b5d854062600000000000000000000000000000000000000000000000000000000000000600000000000000000000000000000000000000000000000000000000000000180000000000000000000000000eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee0000000000000000000000006b175474e89094c44da98b954eedeac495271d0f000000000000000000000000fd3dfb524b2da40c8a6d703c62be36b5d8540626000000000000000000000000d7c14e5362bf61e96cf7270c2f55b3b2badab42c00000000000000000000000000000000000000000000000000038d7ea4c68000000000000000000000000000000000000000000000000000236f8cd2b0fb8c9000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006400000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000140000000000000000000000000000000000000000000000000000000000000026000000000000000000000000000000000000000000000000000000000000003c0000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000038d7ea4c6800000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000004d0e30db00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000064eb5625d9000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc20000000000000000000000006b064419100d1e248fbaca5a5fd6fee559da341a00000000000000000000000000000000000000000000000000038d7ea4c68000000000000000000000000000000000000000000000000000000000008000000000000000000000006b064419100d1e248fbaca5a5fd6fee559da341a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000000000000000000000000000000000000000000a48201aa3f000000000000000000000000c02aaa39b223fe8d0a0e5c4f27ead9083c756cc200000000000000000000000000000000000000000000000000038d7ea4c680000000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000001ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000184b3af37c0000000000000000000000000000000000000000000000000000000000000008080000000000000000000000000000000000000000000000000000000000000240000000000000000000000006b175474e89094c44da98b954eedeac495271d0f00000000000000000000000000000001000000000000000000000000000000010000000000000000000000006b175474e89094c44da98b954eedeac495271d0f0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000044a9059cbb000000000000000000000000d7c14e5362bf61e96cf7270c2f55b3b2badab42c00000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000018080");
        console.log(response);
    })
})
